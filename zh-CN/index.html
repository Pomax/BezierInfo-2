<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>贝塞尔曲线底漆</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png" />

    <base href=".." />

    <!-- And a slew of SEO related meta elements, because being discoverable is important -->
    <meta
      name="description"
      content="A detailed explanation of Bézier curves, and how to do the many things that we commonly want to do with them."
    />

    <!-- opengraph information -->
    <meta property="og:title" content="贝塞尔曲线底漆" />
    <meta
      property="og:image"
      content="https://pomax.github.io/bezierinfo/images/og-image.png"
    />
    <meta property="og:type" content="text" />
    <meta property="og:url" content="https://pomax.github.io/bezierinfo" />
    <meta
      property="og:description"
      content="A detailed explanation of Bézier curves, and how to do the many things that we commonly want to do with them."
    />
    <meta property="og:locale" content="zh-CN}}" />
    <meta property="og:type" content="article" />
    <meta property="og:published_time" content="2013-06-13 12:00:00" />
    <meta property="og:author" content="Mike 'Pomax' Kamermans" />
    <meta property="og:section" content="Bézier Curves" />
    <meta property="og:tag" content="Bézier Curves" />

    <!-- twitter card information -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@TheRealPomax" />
    <meta name="twitter:creator" content="@TheRealPomax" />
    <meta
      name="twitter:image"
      content="https://pomax.github.io/bezierinfo/images/og-image.png"
    />
    <meta name="twitter:url" content="https://pomax.github.io/bezierinfo" />
    <meta
      name="twitter:description"
      content="A detailed explanation of Bézier curves, and how to do the many things that we commonly want to do with them."
    />

    <!-- my own referral/page hit tracker, because Google knows enough -->
    <script src="./lib/site/referrer.js" type="module" async></script>

    <!-- the part that makes interactive graphics work: an HTML5 <graphics-element> custom element -->
    <script
      src="./lib/custom-element/graphics-element.js"
      type="module"
      async
      defer
    ></script>
    <link rel="stylesheet" href="./lib/custom-element/graphics-element.css" />

    <!-- page styling -->
    <link rel="stylesheet" href="placeholder-style.css" />
  </head>

  <body>
    <header>
      <h1>贝塞尔曲线底漆</h1>
      <h2>
        A free, online book for when you really need to know how to do Bézier
        things.
      </h2>
      <span>Read this in your own language:</span>
      <ul>
        <li><a href="./index.html">English</a></li>
        <li><a href="./ja-JP/index.html">日本語</a></li>
        <li><a href="./zh-CN/index.html">中文</a></li>
      </ul>
      <span
        >Don't see your language listed?
        <a href="https://github.com/Pomax/BezierInfo-2/wiki/localize"
          >Help translate this content!</a
        ></span
      >
      <nav aria-labelledby="toc">
        <h1 id="toc">目录</h1>
        <ol>
          <li><a href="#introduction">简单介绍</a></li>
          <li><a href="#whatis">什么构成了贝塞尔曲线？</a></li>
          <li><a href="#explanation">贝塞尔曲线的数学原理</a></li>
        </ol>
      </nav>
    </header>

    <main>
      <section id="preface">
        <section id="preface">
          <h1>序言</h1>
          <p>
            我们通常用线条来绘制2D图形，大致分为两种线条：直线和曲线。不论我们动手还是用电脑，都能很容易地画出第一种线条。只要给电脑起点和终点，砰！直线就画出来了。没什么好疑问的。
          </p>
          <p>
            然而，绘制曲线却是个大问题。虽然我们可以很容易地徒手画出曲线，但除非给出描述曲线的数学函数，不然计算机无法画出曲线。实际上，画直线时也需要数学函数，但画直线所需的方程式很简单，我们在这里不去考虑。在计算机看来，所有线条都是“函数”，不管它们是直线还是曲线。然而，这就表示我们需要找到能在计算机上表现良好的曲线方程。这样的曲线有很多种，在本文我们主要关注一类特殊的、备受关注的函数，基本上任何画曲线的地方都会用到它：贝塞尔曲线。
          </p>
          <p>
            它们是以<a href="https://en.wikipedia.org/wiki/Pierre_B%C3%A9zier"
              >Pierre Bézier</a
            >命名的，尽管他并不是第一个，或者说唯一“发明”了这种曲线的人，但他让世界知道了这种曲线十分适合设计工作（在1962年为Renault工作并发表了他的研究）。有人也许会说数学家<a
              href="https://en.wikipedia.org/wiki/Paul_de_Casteljau"
              >Paul de Casteljau</a
            >是第一个发现这类曲线特性的人，在Citroën工作时，他提出了一种很优雅的方法来画这些曲线。然而，de
            Casteljau没有发表他的工作，这使得“谁先发现”这一问题很难有一个确切的答案。
            贝塞尔曲线本质上是伯恩斯坦多项式，这是<a
              href="https://en.wikipedia.org/wiki/Sergei_Natanovich_Bernstein"
              >Sergei Natanovich Bernstein</a
            >研究的一种数学函数，关于它们的出版物至少可以追溯到1912年。无论如何，这些都只是一些冷知识，你可能更在意的是这些曲线很方便：你可以连接多条贝塞尔曲线，并且连接起来的曲线看起来就像是一条曲线。甚至，在你在Photoshop中画“路径”或使用一些像Flash、Illustrator和Inkscape这样的矢量绘图程序时，所画的曲线都是贝塞尔曲线。
          </p>
          <p>
            那么，要是你自己想编程实现它们呢？有哪些陷阱？你怎么画它们？包围盒是怎么样的，怎么确定交点，怎么拉伸曲线，简单来说：你怎么对曲线做一切你想做的事？这就是这篇文章想说的。准备好学习一些数学吧!
          </p>
          <p>
            —Pomax (推特账号,
            <a href="https://twitter.com/TheRealPomax">@TheRealPomax</a>)
          </p>
          <div class="note">
            <h2>注意：几乎所有的贝塞尔图形都是可交互的。</h2>
            <p>
              这个页面使用了基于<a href="http://pomax.github.io/bezierjs"
                >Bezier.js</a
              >
              的可交互例子。
            </p>
            <!-- The following is no longer true
，还有一些用[MathJax](http://MathJax.org) 排版的“真正的”数学（LaTeX形式）。这个页面是用Webpack离线生成的React应用，这便让加入“查看源码”选项更具挑战性了。我仍然试图将它们添加回来，但跟前几年的版本相比，不觉得它能够支撑部署这个更新。
-->

            <h2>这本书是开源的。</h2>
            <p>
              这本书是开源的软件项目，现有两个github仓库。第一个<a
                href="https://github.com/pomax/bezierinfo"
                >https://github.com/pomax/bezierinfo</a
              >，它是你现在在看的这个，纯粹用来展示的版本。另外一个<a
                href="https://github.com/pomax/BezierInfo-2"
                >https://github.com/pomax/BezierInfo-2</a
              >，是带有所有html,
              javascript和css的开发版本。你可以fork任意一个，随便做些什么，当然除了把它当作自己的作品来商用。
              =)
            </p>
            <h2>用到的数学将有多复杂？</h2>
            <p>
              这份入门读物用到的大部分数学知识都是高中所学的。如果你理解基本的计算并能看懂英文的话，就能上手这份材料。有时候会用到<em>复杂</em>一点的数学，但如果你不想深究它们，可以选择跳过段落里的“详解”部分，或者直接跳到章节末尾，避开那些看起来很深入的数学。章节的末尾往往会列出一些结论，因此你可以直接利用这些结论。
            </p>
            <h2>问题，评论：</h2>
            <p>
              如果你有对于新章节的一些建议，点击
              <a href="https://github.com/pomax/BezierInfo-2/issues"
                >Github issue tracker</a
              >
              （也可以点右上角的repo链接）。如果你有关于材料的一些问题，由于我现在在做改写工作，目前没有评论功能，但你可以用issue跟踪来发表评论。一旦完成重写工作，我会把评论功能加上，或者会有“选择文字段落，点击‘问题’按钮来提问”的系统。到时候我们看看。
            </p>
            <h2>给我买杯咖啡？</h2>
            <p>
              如果你很喜欢这本书，或发现它对你要做的事很有帮助，或者你想知道怎么表达自己对这本书的感激，你可以
              <a
                href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=QPRDLNGDANJSW"
                >给我买杯咖啡</a
              >
              ，所少钱取决于你。这份工作持续了很多年，从一份小小的简要到70多页关于贝塞尔曲线的读物，在完成它的过程中倾注了很多咖啡。我从未后悔花在这上面的每一分钟，但如果有更多咖啡的话，我可以坚持写下去!
            </p>
          </div>
        </section>
      </section>
      <section id="changelog">
        <h1>What's new?</h1>
        <p>
          This primer is a living document, and so depending on when you last
          look at it, there may be new content. Click the following link to
          expand this section to have a look at what got added, when.
        </p>
        <section>
          <h2>August 2020</h2>
          <ul>
            <li>
              Completely redid all the code for the site, except for chapter
              text: the Primer is now finally a normal web page again.
            </li>
          </ul>
          <h2>June 2020</h2>
          <ul>
            <li>Added automatic CI/CD using Github Actions</li>
          </ul>
          <h2>January 2020</h2>
          <ul>
            <li>Added reset buttons to all graphics</li>
            <li>Updated to preface to correctly describe the on-page maths</li>
            <li>
              Fixed the Catmull-Rom section because it had glaring maths errors
            </li>
          </ul>
          <h2>August 2019</h2>
          <ul>
            <li>Added a section on (plain) rational Bezier curves</li>
            <li>Improved the Graphic component to allow for sliders</li>
          </ul>
          <h2>December 2018</h2>
          <ul>
            <li>Added a section on curvature and calculating kappa.</li>
            <li>
              Added a Patreon page! Head on over to
              https://patreon.com/bezierinfo to help support this site!
            </li>
          </ul>
          <h2>August 2018</h2>
          <ul>
            <li>
              Added a section on finding a curve's y, if all you have is the x
              coordinate.
            </li>
          </ul>
          <h2>July 2018</h2>
          <ul>
            <li>
              Rewrote the 3D normals section, implementing and explaining
              Rotation Minimising Frames.
            </li>
            <li>
              Updated the section on curve order raising/lowering, showing how
              to get a least-squares optimized lower order curve.
            </li>
            <li>
              (Finally) updated 'npm test' so that it automatically rebuilds
              when files are changed while the dev server is running.
            </li>
          </ul>
          <h2>June 2018</h2>
          <ul>
            <li>Added a section on direct curve fitting.</li>
            <li>Added source links for all graphics.</li>
            <li>Added this "What's new?" section.</li>
          </ul>
          <h2>April 2017</h2>
          <ul>
            <li>Added a section on 3d normals.</li>
            <li>
              Added live-updating for the social link buttons, so they always
              link to the specific section you're reading.
            </li>
          </ul>
          <h2>February 2017</h2>
          <ul>
            <li>Finished rewriting the entire codebase for localization.</li>
          </ul>
          <h2>January 2016</h2>
          <ul>
            <li>Added a section to explain the Bezier interval.</li>
            <li>Rewrote the Primer as a React application.</li>
          </ul>
          <h2>December 2015</h2>
          <ul>
            <li>
              Set up the split repository between BezierInfo-2 as development
              repository, and bezierinfo as live page.
            </li>
            <li>
              Removed the need for client-side LaTeX parsing entirely, so the
              site doesn't take a full minute or more to load all the graphics.
            </li>
          </ul>
          <h2>May 2015</h2>
          <ul>
            <li>
              Switched over to pure JS rather than
              Processing-through-Processing.js
            </li>
            <li>
              Added Cardano's algorithm for finding the roots of a cubic
              polynomial.
            </li>
          </ul>
          <h2>April 2015</h2>
          <ul>
            <li>Added a section on arc length approximations.</li>
          </ul>
          <h2>February 2015</h2>
          <ul>
            <li>Added a section on the canonical cubic Bezier form.</li>
          </ul>
          <h2>November 2014</h2>
          <ul>
            <li>Switched to HTTPS.</li>
          </ul>
          <h2>July 2014</h2>
          <ul>
            <li>Added the section on arc approximation.</li>
          </ul>
          <h2>April 2014</h2>
          <ul>
            <li>Added the section on Catmull-Rom fitting.</li>
          </ul>
          <h2>November 2013</h2>
          <ul>
            <li>Added the section on Catmull-Rom / Bezier conversion.</li>
            <li>Added the section on Bezier cuves as matrices</li>
          </ul>
          <h2>April 2013</h2>
          <ul>
            <li>Added a section on poly-Beziers.</li>
            <li>Added a section on boolean shape operations.</li>
          </ul>
          <h2>March 2013</h2>
          <ul>
            <li>First drastic rewrite</li>
            <li>Added sections on circle approximations.</li>
            <li>Added a section on projecting a point onto a curve.</li>
            <li>Added a section on tangents and normals.</li>
            <li>Added Legendre-Gauss numerical data tables.</li>
          </ul>
          <h2>October 2011</h2>
          <ul>
            <li>
              First commit for the https://pomax.github.io/bezierinfo site,
              based on the pre-Primer webpage that covered the basics of Bezier
              curves in HTML with Processing.js examples.
            </li>
          </ul>
        </section>
      </section>
      <section id="chapters">
        <section id="introduction">
          <h1>简单介绍</h1>
          <p>
            让我们有个好的开始：当我们在谈论贝塞尔曲线的时候，所指的就是你在如下图像看到的东西。它们从某些起点开始，到终点结束，并且受到一个或多个的“中间”控制点的影响。本页面上的图形都是可交互的，你可以拖动这些点，看看这些形状在你的操作下会怎么变化。
          </p>
          <div class="figure">
            <graphics-element
              title="二次贝塞尔曲线"
              width="275"
              height="275"
              src="./chapters/introduction/quadratic.js"
            >
              <fallback-image>
                <img
                  width="275px"
                  height="275px"
                  src="./images/chapters/introduction/quadratic.png"
                  loading="lazy"
                />
                Scripts are disabled. Showing fallback image.
              </fallback-image></graphics-element
            >
            <graphics-element
              title="三次贝塞尔曲线"
              width="275"
              height="275"
              src="./chapters/introduction/cubic.js"
            >
              <fallback-image>
                <img
                  width="275px"
                  height="275px"
                  src="./images/chapters/introduction/cubic.png"
                  loading="lazy"
                />
                Scripts are disabled. Showing fallback image.
              </fallback-image></graphics-element
            >
          </div>

          <p>
            这些曲线在计算机辅助设计和计算机辅助制造应用（CAD/CAM）中用的很多。在图形设计软件中也常用到，像Adobe
            Illustrator, Photoshop, Inkscape,
            Gimp等等。还可以应用在一些图形技术中，像矢量图形（SVG）和OpenType字体（ttf/otf）。许多东西都用到贝塞尔曲线，如果你想更了解它们...准备好继续往下学吧！
          </p>
        </section>
        <section id="whatis">
          <h1>什么构成了贝塞尔曲线？</h1>
          <p>
            操作点的移动，看看曲线的变化，可能让你感受到了贝塞尔曲线是如何表现的。但贝塞尔曲线究竟<em>是</em>什么呢？有两种方式来解释贝塞尔曲线，并且可以证明它们完全相等，但是其中一种用到了复杂的数学，另外一种比较简单。所以...我们先从简单的开始吧：
          </p>
          <p>
            贝塞尔曲线是<a
              href="https://zh.wikipedia.org/wiki/%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC"
              >线性插值</a
            >的结果。这听起来很复杂，但你在很小的时候就做过线性插值：当你指向两个物体中的另外一个物体时，你就用到了线性插值。它就是很简单的“选出两点之间的一个点”。
          </p>
          <p>
            如果我们知道两点之间的距离，并想找出离第一个点20%间距的一个新的点(也就是离第二个点80%的间距)，我们可以通过简单的计算来得到：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/b5aa26284ba3df74970a95cb047a841d.svg"
            width="501px"
            height="103px"
            loading="lazy"
          />
          <p>
            让我们来通过实际操作看一下：下面的图形都是可交互的，因此你可以通过上下键来增加或减少插值距离，来观察图形的变化。我们从三个点构成的两条线段开始。通过对各条线段进行线性插值得到两个点，对点之间的线段再进行线性插值，产生一个新的点。最终这些点——所有的点都可以通过选取不同的距离插值产生——构成了贝塞尔曲线
            ：
            <graphics-element
              title="Linear Interpolation leading to Bézier curves"
              width="825"
              height="275"
              src="./chapters/whatis/interpolation.js"
            >
              <fallback-image>
                <img
                  width="825px"
                  height="275px"
                  src="./images/chapters/whatis/interpolation.png"
                  loading="lazy"
                />
                Scripts are disabled. Showing fallback image.
              </fallback-image></graphics-element
            >
          </p>
          <p>这为我们引出了复杂的数学：微积分。</p>
          <p>
            虽然我们刚才好像没有用到这个，我们实际上只是逐步地画了一条二次曲线，而不是一次画好。贝塞尔曲线的一个很棒的特性就是它们可以通过多项式方程表示，也可以用很简单的插值形式表示。因此，反过来说，我们可以基于“真正的数学”（检查方程式，导数之类的东西），也可以通过观察曲线的“机械”构成（比如说，可以得知曲线永远不会延伸超过我们用来构造它的点），来看看这些曲线能够做什么。
          </p>
          <p>
            让我们从更深的层次来观察贝塞尔曲线。看看它们的数学表达式，从这些表达式衍生得到的属性，以及我们可以对贝塞尔曲线做的事。
          </p>
        </section>
        <section id="explanation">
          <h1>贝塞尔曲线的数学原理</h1>
          <p>
            贝塞尔曲线是“参数”方程的一种形式。从数学上讲，参数方程作弊了：“方程”实际上是一个从输入到<strong>唯一</strong>输出的、良好定义的映射关系。几个输入进来，一个输出返回。改变输入变量，还是只有一个输出值。参数方程在这里作弊了。它们基本上干了这么件事，“好吧，我们想要更多的输出值，所以我们用了多个方程”。举个例子：假如我们有一个方程，通过一些计算，将假设为<i>x</i>的一些值映射到另外的值:
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/1caef9931f954e32eae5067b732c1018.svg"
            width="96px"
            height="17px"
            loading="lazy"
          />
          <p>
            记号<i>f(x)</i>是表示函数的标准方式（为了方便起见，如果只有一个的话，我们称函数为<i>f</i>），函数的输出根据一个变量（本例中是<i>x</i>）变化。改变<i>x</i>，<i>f(x)</i>的输出值也会变。
          </p>
          <p>
            到目前没什么问题。现在，让我们来看一下参数方程，以及它们是怎么作弊的。我们取以下两个方程：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/0f5cffd58e864fec6739a57664eb8cbd.svg"
            width="93px"
            height="36px"
            loading="lazy"
          />
          <p>
            这俩方程没什么让人印象深刻的，只不过是正弦函数和余弦函数，但正如你所见，输入变量有两个不同的名字。如果我们改变了<i>a</i>的值，<i>f(b)</i>的输出不会有变化，因为这个方程没有用到<i>a</i>。参数方程通过改变这点来作弊。在参数方程中，所有不同的方程共用一个变量，如下所示：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/066a910ae6aba69c40a338320759cdd1.svg"
            width="100px"
            height="40px"
            loading="lazy"
          />
          <p>
            多个方程，但只有一个变量。如果我们改变了<i>t</i>的值，<i>f<sub>a</sub>(t)</i>和<i>f<sub>b</sub>(t)</i>的输出都会发生变化。你可能会好奇这有什么用，答案其实很简单：对于参数曲线，如果我们用常用的标记来替代<i>f<sub>a</sub>(t)</i>和<i>f<sub>b</sub>(t)</i>，看起来就有些明朗了：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/4cf6fb369841e2c5d36e5567a8db4306.svg"
            width="77px"
            height="40px"
            loading="lazy"
          />
          <p>
            好了，通过一些神秘的<i>t</i>值将<i>x</i>/<i>y</i>坐标系联系起来。
          </p>
          <p>
            所以，参数曲线不像一般函数那样，通过<i>x</i>坐标来定义<i>y</i>坐标，而是用一个“控制”变量将它们连接起来。如果改变<i>t</i>的值，每次变化时我们都能得到<strong>两个</strong>值，这可以作为图形中的(<i>x</i>,<i>y</i>)坐标。比如上面的方程组，生成位于一个圆上的点：我们可以使<i>t</i>在正负极值间变化，得到的输出(<i>x</i>,<i>y</i>)都会位于一个以原点(0,0)为中心且半径为1的圆上。如果我们画出<i>t</i>从0到5时的值，将得到如下图像（你可以用上下键来改变画的点和值）：
          </p>
          <graphics-element
            title="(一部分的)圆: x=sin(t), y=cos(t)"
            width="275"
            height="275"
            src="./chapters/explanation/circle.js"
          >
            <fallback-image>
              <img
                width="275px"
                height="275px"
                src="./images/chapters/explanation/circle.png"
                loading="lazy"
              />
              Scripts are disabled. Showing fallback image.
            </fallback-image></graphics-element
          >

          <p>
            贝塞尔曲线是（一种）参数方程，并在它的多个维度上使用相同的基本方程。在上述的例子中<i>x</i>值和<i>y</i>值使用了不同的方程，与此不同的是，贝塞尔曲线的<i>x</i>和<i>y</i>都用了“二项多项式”。那什么是二项多项式呢？
          </p>
          <p>你可能记得高中所学的多项式，看起来像这样：</p>
          <img
            class="LaTeX SVG"
            src="images/latex/bb06cb82d372f822a7b35e661502bd72.svg"
            width="213px"
            height="20px"
            loading="lazy"
          />
          <p>
            如果它的最高次项是<i>x³</i>就称为“三次”多项式，如果最高次项是<i>x²</i>，称为“二次”多项式，如果只含有<i>x</i>的项，它就是一条线（不过不含任何<i>x</i>的项它就不是一个多项式！）
          </p>
          <p>
            贝塞尔曲线不是x的多项式，它是<i>t</i>的多项式，<i>t</i>的值被限制在0和1之间，并且含有<i>a</i>，<i>b</i>等参数。它采用了二次项的形式，听起来很神奇但实际上就是混合不同值的简单描述：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/2adc12d0cff01d40d9e1702014a7dc19.svg"
            width="367px"
            height="64px"
            loading="lazy"
          />
          <p>
            我明白你在想什么：这看起来并不简单，但如果我们拿掉<i>t</i>并让系数乘以1，事情就会立马简单很多，看看这些二次项：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/9c18f76e76cf684ecd217ad8facc2e93.svg"
            width="184px"
            height="87px"
            loading="lazy"
          />
          <p>
            需要注意的是，2与1+1相同，3相当于2+1或1+2，6相当于3+3...如你所见，每次我们增加一个维度，只要简单地将头尾置为1，中间的操作都是“将上面的两个数字相加”。现在就能很容易地记住了。
          </p>
          <p>
            还有一个简单的办法可以弄清参数项怎么工作的：如果我们将<i>(1-t)</i>重命名为<i>a</i>，将<i>t</i>重命名为<i>b</i>，暂时把权重删掉，可以得到这个：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/449850dead8abbdd11cd4aec1bac082e.svg"
            width="903px"
            height="63px"
            loading="lazy"
          />
          <p>
            基本上它就是“每个<i>a</i>和<i>b</i>结合项”的和，在每个加号后面逐步的将<i>a</i>换成<i>b</i>。因此这也很简单。现在你已经知道了二次多项式，为了叙述的完整性，我将给出一般方程：
          </p>
          <img
            class="LaTeX SVG"
            src="images/latex/9a6d17c362980775f1425d0d2ad9a36a.svg"
            width="300px"
            height="55px"
            loading="lazy"
          />
          <p>
            这就是贝塞尔曲线完整的描述。在这个函数中的Σ表示了这是一系列的加法（用Σ下面的变量，从...=&lt;值&gt;开始，直到Σ上面的数字结束）。
          </p>
          <div class="howtocode">
            <h3>如何实现基本方程</h3>
            <p>
              我们可以用之前说过的方程，来简单地实现基本方程作为数学构造，如下：
            </p>
            <pre><code>function Bezier(n,t):
  sum = 0
  for(k=0; k&lt;n; k++):
    sum += n!/(k!*(n-k)!) * (1-t)^(n-k) * t^(k)
  return sum</code></pre>
            <p>
              我说我们“可以用”是因为我们不会这么去做：因为阶乘函数开销<em>非常大</em>。并且，正如我们在上面所看到的，我们不用阶乘也能够很容易地构造出帕斯卡三角形：一开始是[1]，接着是[1,2,1],然后是[1,3,3,1]等等。下一行都比上一行多一个数，首尾都为1，中间的数字是上一行两边元素的和。
            </p>
            <p>
              我们可以很快的生成这个列表，并在之后使用这个查找表而不用再计算二次多项式的系数：
            </p>
            <pre><code>lut = [      [1],           // n=0
            [1,1],          // n=1
           [1,2,1],         // n=2
          [1,3,3,1],        // n=3
         [1,4,6,4,1],       // n=4
        [1,5,10,10,5,1],    // n=5
       [1,6,15,20,15,6,1]]  // n=6

binomial(n,k):
  while(n &gt;= lut.length):
    s = lut.length
    nextRow = new array(size=s+1)
    nextRow[0] = 1
    for(i=1, prev=s-1; i&lt;s; i++):
      nextRow[i] = lut[prev][i-1] + lut[prev][i]
    nextRow[s] = 1
    lut.add(nextRow)
  return lut[n][k]</code></pre>
            <p>
              这里做了些什么？首先，我们声明了一个足够大的查找表。然后，我们声明了一个函数来获取我们想要的值，并且确保当一个请求的n/k对不在LUT查找表中时，先将表扩大。我们的基本函数如下所示：
            </p>
            <pre><code>function Bezier(n,t):
  sum = 0
  for(k=0; k&lt;=n; k++):
    sum += binomial(n,k) * (1-t)^(n-k) * t^(k)
  return sum</code></pre>
            <p>
              完美。当然我们可以进一步优化。为了大部分的计算机图形学目的，我们不需要任意的曲线。我们需要二次曲线和三次曲线（实际上这篇文章没有涉及任意次的曲线，因此你会在其他地方看到与这些类似的代码），这说明我们可以彻底简化代码:
            </p>
            <pre><code>function Bezier(2,t):
  t2 = t * t
  mt = 1-t
  mt2 = mt * mt
  return mt2 + 2*mt*t + t2

function Bezier(3,t):
  t2 = t * t
  t3 = t2 * t
  mt = 1-t
  mt2 = mt * mt
  mt3 = mt2 * mt
  return mt3 + 3*mt2*t + 3*mt*t2 + t3</code></pre>
            <p>现在我们知道如何代用码实现基本方程了。很好。</p>
          </div>

          <p>
            既然我们已经知道基本函数的样子，是时候添加一些魔法来使贝塞尔曲线变得特殊了：控制点。
          </p>
        </section>
      </section>
    </main>
  </body>
</html>
